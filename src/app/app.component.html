<div class="app-container d-flex">
  <!-- main nav -->
  <nav
    class="sidebar vh-100 p-0"
    style="width: 170px; position: fixed; top: 0; left: 0; z-index: 1000; background-color: #1e2b6b;"
    *ngIf="account && account.jwtToken"
  >
    <!-- Logo Section -->
    <div class="text-center py-4" style="background-color: #1e2b6b;">
      <img src="../assets/images/bc logo.png" width="80" height="80" alt="bc logo" class="mb-2">
    </div>
    
    <!-- Navigation Items -->
    <ul class="nav flex-column px-0" style="height: calc(100vh - 120px); display: flex; flex-direction: column; justify-content: space-between;">
      <!-- Main Navigation -->
      <div>
        <li class="nav-item">
          <a routerLink="/home" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            Dashboard
          </a>
        </li>
      
<<<<<<< Updated upstream
      <li *ngIf="account.role === Role.SuperAdmin" class="nav-item">
        <a routerLink="/admin/accounts" routerLinkActive="active" class="nav-link text-white"
          >Accounts</a
        >
      </li>
      <li class="nav-item" *ngIf="account.role === Role.Teacher">
        <a routerLink="/teacher" routerLinkActive="active" class="nav-link text-white"
          >Subjects</a
        >
      <li class="nav-item" *ngIf="account.role === Role.Admin">
      <a routerLink="/" routerLinkActive="active" class="nav-link text-white"
        >Subjects List</a
      >
      </li>
      <!-- <li class="nav-item" *ngIf="account.role === Role.Admin">
      <a routerLink="/" routerLinkActive="active" class="nav-link text-white"
        >Subject Assignments</a
      >
      </li> -->
      <li class="nav-item" *ngIf="account.role === Role.Principal || account.role === Role.Registrar">
      <a routerLink="/homeroom" routerLinkActive="active" class="nav-link text-white"
        >Homerooms</a
      >
      </li>
      <li class="nav-item" *ngIf="account.role === Role.Student">
        <a routerLink="/egrade" routerLinkActive="active" class="nav-link text-white"
          >E-Grade</a
        >
      </li>
      <li class="nav-item">
        <a
          routerLink="/profile"
          routerLinkActive="active"
          class="nav-link text-white"
          >My Profile</a
        >
      </li>
      <li class="nav-item">
      <a routerLink="/" routerLinkActive="active" class="nav-link text-white"
        >Modify Account</a
      >
      </li>
      <li class="nav-item">
        <a
          (click)="openLogoutModal()"
          class="nav-link text-white"
          style="cursor: pointer"
          >Logout</a
        >
      </li>
=======
        <!-- Admin Menu Items -->
        <li *ngIf="account.role === Role.Admin || account.role === Role.SuperAdmin" class="nav-item">
          <a routerLink="/admin/accounts" routerLinkActive="active" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            Accounts
          </a>
        </li>
        <li class="nav-item" *ngIf="account.role === Role.Admin || account.role === Role.SuperAdmin">
          <a routerLink="/admin/subjects" routerLinkActive="active" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            Subject Lists
          </a>
        </li>
        <li class="nav-item" *ngIf="account.role === Role.Admin || account.role === Role.SuperAdmin">
          <a routerLink="/admin/assignments" routerLinkActive="active" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            Teacher Assignments
          </a>
        </li>
        <li class="nav-item" *ngIf="account.role === Role.Admin || account.role === Role.SuperAdmin">
          <a routerLink="/homeroom" routerLinkActive="active" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            Homeroom
          </a>
        </li>
        
        <!-- Teacher Menu Items -->
        <li class="nav-item" *ngIf="account.role === Role.Teacher">
          <a routerLink="/teacher" routerLinkActive="active" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            Subjects
          </a>
        </li>
        
        <!-- Student Menu Items -->
        <li class="nav-item" *ngIf="account.role === Role.Student">
          <a routerLink="/egrade" routerLinkActive="active" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            E-Grade
          </a>
        </li>
        
        <!-- Common Menu Items -->
        <li class="nav-item">
          <a routerLink="/profile" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            My Profile
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/profile/edit" routerLinkActive="active" 
             class="nav-link text-white py-3 px-4" 
             style="border: none; background: transparent; font-size: 14px; font-weight: 500;">
            Modify Account
          </a>
        </li>
      </div>
      
      <!-- Logout at bottom -->
      <div>
        <li class="nav-item">
          <a (click)="openLogoutModal()" 
             class="nav-link text-white py-3 px-4" 
             style="cursor: pointer; border: none; background: transparent; font-size: 14px; font-weight: 500;">
            Logout
          </a>
        </li>
      </div>
>>>>>>> Stashed changes
    </ul>
  </nav>

  <div
    class="modal fade"
    tabindex="-1"
    [ngClass]="{ show: showLogoutModal }"
    [ngStyle]="{ display: showLogoutModal ? 'block' : 'none' }"
    role="dialog"
    aria-modal="true"
  >
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Confirm Logout</h3>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to logout?</p>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            (click)="closeLogoutModal()"
          >
            No
          </button>
          <button type="button" class="btn btn-danger" (click)="logout()">
            Yes
          </button>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal-backdrop fade"
    [ngClass]="{ show: showLogoutModal }"
    *ngIf="showLogoutModal"
  ></div>

  <div
    class="flex-grow-1"
    [ngStyle]="!(account && account.jwtToken)   
      ? 
      {
          'background-color': '#f8f9fa',
          'padding': '0'
        } : {
          'margin-left': '170px',
          'padding': '0',
          'background-color': '#f8f9fa'
        }
    "
  >
    
    <router-outlet name="subnav"></router-outlet> 

    <!-- global alert -->
    <alert></alert>
    
    <!-- main router outlet -->
    <router-outlet></router-outlet>
  </div>
</div>
