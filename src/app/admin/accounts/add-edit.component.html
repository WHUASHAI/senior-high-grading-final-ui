<!-- Admin Account Add/Edit -->
<div class="container-fluid p-0" style="background-color: #f8f9fa; min-height: 100vh;">
  <div class="row g-0">
    <!-- Content Area -->
    <div class="col" style="padding: 40px 60px;">
      <!-- Header Section -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0" style="color: #333; font-weight: 600; font-size: 2rem;">{{ isAddMode ? 'Create New Account' : 'Edit Account' }}</h2>
        <div class="d-flex gap-4">
          <div class="text-end">
            <span style="color: #666; font-size: 0.95rem;">{{ isAddMode ? 'Add new user to system' : 'Update account details' }}</span>
          </div>
        </div>
      </div>
      <!-- Account Form Section -->
      <div style="border: 3px solid #000; background: white; padding: 30px 25px; margin: 20px 0; position: relative;">
        <!-- Form label in top left -->
        <div style="position: absolute; top: -15px; left: 15px; background: #f8f9fa; padding: 0 15px;">
          <span style="color: #000; font-weight: 600; font-size: 1.1rem;">Account Information</span>
        </div>
        
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
          <!-- Personal Information Section -->
          <div class="mb-4">
            <h5 class="fw-bold mb-3" style="color: #1e3a8a;">Personal Information</h5>
            <div class="row mb-3">
            <div class="col-md-3">
              <label class="form-label fw-semibold">Title <span class="text-danger">*</span></label>
              <select formControlName="title" class="form-select" [ngClass]="{ 'is-invalid': submitted && f.title.errors }">
                <option value="">Select Title</option>
                <option value="Mr">Mr</option>
                <option value="Mrs">Mrs</option>
                <option value="Miss">Miss</option>
                <option value="Ms">Ms</option>
                <option value="Dr">Dr</option>
                <option value="Prof">Prof</option>
              </select>
              <div *ngIf="submitted && f.title.errors" class="invalid-feedback">
                <div *ngIf="f.title.errors.required">Title is required</div>
              </div>
            </div>
            <div class="col-md-4">
              <label class="form-label fw-semibold">First Name <span class="text-danger">*</span></label>
              <input type="text" formControlName="firstName" class="form-control" placeholder="Enter first name" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" />
              <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                <div *ngIf="f.firstName.errors.required">First Name is required</div>
              </div>
            </div>
            <div class="col-md-5">
              <label class="form-label fw-semibold">Last Name <span class="text-danger">*</span></label>
              <input type="text" formControlName="lastName" class="form-control" placeholder="Enter last name" [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" />
              <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                <div *ngIf="f.lastName.errors.required">Last Name is required</div>
              </div>
            </div>
            </div>
          </div>

          <!-- Contact Information Section -->
          <div class="mb-4">
            <h5 class="fw-bold mb-3" style="color: #1e3a8a;">Contact Information</h5>
          <div class="row mb-3">
            <div class="col-md-12">
              <label class="form-label fw-semibold">Email Address <span class="text-danger">*</span></label>
              <input type="email" formControlName="email" class="form-control" placeholder="Enter email address" [ngClass]="{ 'is-invalid': submitted && f.email.errors }" />
              <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                <div *ngIf="f.email.errors.required">Email is required</div>
                <div *ngIf="f.email.errors.email">Please enter a valid email address</div>
              </div>
            </div>
          </div>
          </div>

          <!-- Account Settings Section -->
          <div class="mb-4">
            <h5 class="fw-bold mb-3" style="color: #1e3a8a;">Account Settings</h5>
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label fw-semibold">Role <span class="text-danger">*</span></label>
              <select formControlName="role" class="form-select" [ngClass]="{ 'is-invalid': submitted && f.role.errors }">
                <option value="Admin">Administrator</option>
                <option value="Teacher">Teacher</option>
                <option value="Student">Student</option>
              </select>
              <div *ngIf="submitted && f.role.errors" class="invalid-feedback">
                <div *ngIf="f.role.errors.required">Role is required</div>
              </div>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-semibold">Account Status</label>
              <select formControlName="isActive" class="form-select">
                <option [ngValue]="true">Active</option>
                <option [ngValue]="false">Inactive</option>
              </select>
            </div>
          </div>
          </div>

          <!-- Security Section (Only for new accounts) -->
          <div class="mb-4" *ngIf="isAddMode">
            <h5 class="fw-bold mb-3" style="color: #1e3a8a;">Security</h5>
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label fw-semibold">Password <span class="text-danger">*</span></label>
                <input type="password" formControlName="password" class="form-control" placeholder="Enter password" [ngClass]="{ 'is-invalid': submitted && f.password.errors }" />
                <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
                  <div *ngIf="f.password.errors.required">Password is required</div>
                  <div *ngIf="f.password.errors.minlength">Password must be at least 6 characters</div>
                </div>
                <small class="form-text text-muted">Minimum 6 characters required</small>
              </div>
              <div class="col-md-6">
                <label class="form-label fw-semibold">Confirm Password <span class="text-danger">*</span></label>
                <input type="password" formControlName="confirmPassword" class="form-control" placeholder="Confirm password" [ngClass]="{ 'is-invalid': submitted && f.confirmPassword.errors }" />
                <div *ngIf="submitted && f.confirmPassword.errors" class="invalid-feedback">
                  <div *ngIf="f.confirmPassword.errors.required">Confirm Password is required</div>
                  <div *ngIf="f.confirmPassword.errors.mustMatch">Passwords must match</div>
                </div>
              </div>
            </div>
        </div>

          <!-- Form Actions -->
          <div class="d-flex justify-content-between align-items-center pt-4 mt-4 border-top">
            <button type="button" routerLink="../" class="btn btn-secondary">
              Cancel
            </button>
            <button type="submit" [disabled]="loading" class="btn" style="background-color: #1e3a8a; color: white; border-color: #1e3a8a;">
              <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
              {{ isAddMode ? 'Create Account' : 'Update Account' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

